<html> 
	<head>
		<title> Donate Blood </title>
		<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  		<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  		<script src="https://unpkg.com/@babel/standalone@7/babel.min.js"></script>
		
		<script type="text/javascript">
			async function get_feed()
			{
				const response = await fetch('/api/feed');
				response_json = await response.json();
				return response_json;
			}

			function donate(i)
			{
				let message = document.prompt('Enter the message');

			}
		</script>
	</head>

	<body>
		<p>Welcome to LifeBlood<br>Here are the requests -</p> 
		
		<div id="contents"></div>
		<script type="text/babel">
			async function load_feed()
			{
				let requests = await get_feed();

				let element = (
					<>
					{ requests.map(req => (
						<><p>Name: {req.name} Blood Group: {req.blood_group}  <button onClick={() => donate(req._id)}>Donate</button></p><br /></>
					))}
					</>
				);
				ReactDOM.render(element, document.getElementById('contents'));
			}

			load_feed();
		</script>

		
	</body>
</html>
